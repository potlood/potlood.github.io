import { Point } from "../utils/geometry/point.js";
import { Ellipse } from "../utils/geometry/ellipse.js";
import { Angle } from "../utils/geometry/angle.js";
class PathSegment {
    constructor() {
        this._offset = new Point(0, 0);
        this._scaling = new Point(1, 1);
    }
    translate(offset) {
        this._offset = offset;
    }
    scale(scaling) {
        this._scaling = scaling;
    }
    convertPoint(point, guide) {
        return point.convertToPoint(guide).scale(this._scaling).translate(this._offset);
    }
}
class CloseSegment extends PathSegment {
    getEndPoint(_guide, _startPoint) {
        return new Point(0, 0);
    }
    buildPath(_guide, _startPoint) {
        return " Z";
    }
    clone() {
        return new CloseSegment();
    }
}
class MoveTo extends PathSegment {
    constructor(point) {
        super();
        this.point = point;
    }
    getEndPoint(guide, _startPoint) {
        return this.convertPoint(this.point, guide);
    }
    buildPath(guide, _startPoint) {
        const point = this.convertPoint(this.point, guide);
        return ` M ${point.x} ${point.y}`;
    }
    clone() {
        return new MoveTo(this.point);
    }
}
class LineTo extends MoveTo {
    getEndPoint(guide, _startPoint) {
        return this.convertPoint(this.point, guide);
    }
    buildPath(guide, _startPoint) {
        const point = this.convertPoint(this.point, guide);
        return ` L ${point.x} ${point.y}`;
    }
    clone() {
        return new LineTo(this.point);
    }
}
class ArcTo extends PathSegment {
    constructor(sweepAngle, startAngle, radiusX, radiusY) {
        super();
        this.sweepAngle = sweepAngle;
        this.startAngle = startAngle;
        this.radiusX = radiusX;
        this.radiusY = radiusY;
    }
    getEndPoint(guide, startPoint, overrideSweepAngle) {
        const startAngle = this._getAngleValue(guide, this.startAngle, false);
        let sweepAngle = overrideSweepAngle || this._getAngleValue(guide, this.sweepAngle, true);
        const radiusX = guide.getValue(this.radiusX) * this._scaling.x;
        const radiusY = guide.getValue(this.radiusY) * this._scaling.y;
        const ellipse = Ellipse.fromSinglePoint(startPoint, startAngle, radiusX, radiusY);
        return ellipse.pointAtAngle(startAngle.add(sweepAngle));
    }
    buildPath(guide, startPoint) {
        let sweepAngle = this._getAngleValue(guide, this.sweepAngle, true);
        const clockwise = this._clockwise(guide);
        const radiusX = guide.getValue(this.radiusX) * this._scaling.x;
        const radiusY = guide.getValue(this.radiusY) * this._scaling.y;
        const endPoint = this.getEndPoint(guide, startPoint);
        if (this._fullRotation(guide)) {
            const midPoint = this.getEndPoint(guide, startPoint, Angle.fromNormalized(0.5));
            const firstHalfPath = this._buildInternalPath(midPoint, Math.PI, radiusX, radiusY, true);
            const secondHalfPath = this._buildInternalPath(endPoint, Math.PI, radiusX, radiusY, true);
            return `${firstHalfPath}${secondHalfPath}`;
        }
        else {
            return this._buildInternalPath(endPoint, sweepAngle.toRadians(), radiusX, radiusY, clockwise);
        }
    }
    clone() {
        return new ArcTo(this.sweepAngle, this.startAngle, this.radiusX, this.radiusY);
    }
    _buildInternalPath(endPoint, sweepAngle, radiusX, radiusY, clockwise) {
        const largeArc = (sweepAngle > Math.PI) ? "1" : "0";
        const sweep = (clockwise) ? "1" : "0";
        return ` A ${radiusX} ${radiusY} 0 ${largeArc} ${sweep} ${endPoint.x} ${endPoint.y}`;
    }
    _getAngleValue(guide, variable, addFullRound) {
        const val = guide.getValue(variable);
        const angle = Angle.fromRotation(val);
        angle.round(addFullRound);
        return angle;
    }
    _clockwise(guide) {
        const val = guide.getValue(this.sweepAngle);
        return val > 0;
    }
    _fullRotation(guide) {
        const val = guide.getValue(this.sweepAngle);
        return Angle.fromRotation(val).toNormalized() === 1;
    }
}
class CubicBezierTo extends PathSegment {
    constructor(endPoint, control1, control2) {
        super();
        this.endPoint = endPoint;
        this.control1 = control1;
        this.control2 = control2;
    }
    getEndPoint(guide, _startPoint) {
        return this.convertPoint(this.endPoint, guide);
    }
    buildPath(guide, _startPoint) {
        const endPoint = this.convertPoint(this.endPoint, guide);
        const control1 = this.convertPoint(this.control1, guide);
        const control2 = this.convertPoint(this.control2, guide);
        return ` C ${control1.x} ${control1.y}, ${control2.x} ${control2.y}, ${endPoint.x} ${endPoint.y}`;
    }
    clone() {
        return new CubicBezierTo(this.endPoint, this.control1, this.control2);
    }
}
class QuadBezierTo extends PathSegment {
    constructor(endPoint, control) {
        super();
        this.endPoint = endPoint;
        this.control = control;
    }
    getEndPoint(guide, _startPoint) {
        return this.convertPoint(this.endPoint, guide);
    }
    buildPath(guide, startPoint) {
        const endPoint = this.convertPoint(this.endPoint, guide);
        const control = this.convertPoint(this.control, guide);
        const twoThird = 2 / 3;
        const cubic1 = startPoint.translate(Point.difference(control, startPoint).scale(twoThird));
        const cubic2 = endPoint.translate(Point.difference(control, endPoint).scale(twoThird));
        return ` C ${cubic1.x} ${cubic1.y}, ${cubic2.x} ${cubic2.y}, ${endPoint.x} ${endPoint.y}`;
    }
    clone() {
        return new QuadBezierTo(this.endPoint, this.control);
    }
}
export class ShapePath {
    constructor(guide, filledIn = true, stroked = true) {
        this.segments = [];
        this._path = undefined;
        this._guide = guide;
        this.filledIn = filledIn;
        this.stroked = stroked;
    }
    translate(offset) {
        this.segments.forEach(segment => {
            segment.translate(offset);
        });
    }
    scale(scaling) {
        this.segments.forEach(segment => {
            segment.scale(scaling);
        });
    }
    moveTo(point) {
        this.segments.push(new MoveTo(point));
    }
    lineTo(point) {
        this.segments.push(new LineTo(point));
    }
    arcTo(sweepAngle, startAngle, radiusX, radiusY) {
        this.segments.push(new ArcTo(sweepAngle, startAngle, radiusX, radiusY));
    }
    quadBezierTo(endPoint, control) {
        this.segments.push(new QuadBezierTo(endPoint, control));
    }
    cubicBezierTo(point, control1, control2) {
        this.segments.push(new CubicBezierTo(point, control1, control2));
    }
    close() {
        this.segments.push(new CloseSegment());
    }
    buildPath() {
        if (this._path === undefined) {
            this._path = "";
            this._guide.evaluate();
            let currentPoint = new Point(0, 0);
            this.segments.forEach(segment => {
                this._path += segment.buildPath(this._guide, currentPoint);
                currentPoint = segment.getEndPoint(this._guide, currentPoint);
            });
            this._path = this._path.substr(1);
        }
        return this._path;
    }
    clone() {
        const clone = new ShapePath(this._guide);
        clone.segments = this.segments.map(segment => segment.clone());
        return clone;
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2hhcGUtcGF0aC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9kcmF3aW5nL3NoYXBlLXBhdGgudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLEtBQUssRUFBRSxNQUFNLDRCQUE0QixDQUFDO0FBR25ELE9BQU8sRUFBRSxPQUFPLEVBQUUsTUFBTSw4QkFBOEIsQ0FBQztBQUN2RCxPQUFPLEVBQUUsS0FBSyxFQUFFLE1BQU0sNEJBQTRCLENBQUM7QUFFbkQsTUFBZSxXQUFXO0lBQTFCO1FBQ2MsWUFBTyxHQUFVLElBQUksS0FBSyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztRQUNqQyxhQUFRLEdBQVUsSUFBSSxLQUFLLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO0lBaUJoRCxDQUFDO0lBZlUsU0FBUyxDQUFDLE1BQWE7UUFDMUIsSUFBSSxDQUFDLE9BQU8sR0FBRyxNQUFNLENBQUM7SUFDMUIsQ0FBQztJQUVNLEtBQUssQ0FBQyxPQUFjO1FBQ3ZCLElBQUksQ0FBQyxRQUFRLEdBQUcsT0FBTyxDQUFDO0lBQzVCLENBQUM7SUFNUyxZQUFZLENBQUMsS0FBaUIsRUFBRSxLQUFpQjtRQUN2RCxPQUFPLEtBQUssQ0FBQyxjQUFjLENBQUMsS0FBSyxDQUFDLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDO0lBQ3BGLENBQUM7Q0FDSjtBQUVELE1BQU0sWUFBYSxTQUFRLFdBQVc7SUFDM0IsV0FBVyxDQUFDLE1BQWtCLEVBQUUsV0FBa0I7UUFDckQsT0FBTyxJQUFJLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7SUFDM0IsQ0FBQztJQUVNLFNBQVMsQ0FBQyxNQUFrQixFQUFFLFdBQWtCO1FBQ25ELE9BQU8sSUFBSSxDQUFDO0lBQ2hCLENBQUM7SUFFTSxLQUFLO1FBQ1IsT0FBTyxJ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